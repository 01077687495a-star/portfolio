# 테스트 자동화
---
playwright를 이용해 결제시스템 테스트를 자동화 해보았습니다.

실제 결제창에서 테스트하기에는 어려움이 있어 mock page를 직접 만들어보았습니다.

* 충전하고 싶은 금액 입력
* 결제 약관에 동의 (체크박스 활성화)
* 결제 수단 선택
* 금액입력과 결제 수단, 약관 동의 체크박스 활성화를 모두 충족해야 결제버튼 활성화
* 결제수단으로 카드를 고를 경우 은행 점검시간으로 인한 결제취소 팝업창 생성 ( 어떤 경우에서든 우선적으로 로직적용)
* 1000원 이상 입력, 결제수단 카카오페이 선택 시 입력한 금액과 결제 성공을 알려주는 팝업창 생성
* 1000원 미만 입력, 결제수단 카카오페이 선택 시 최소 입력 가능 금액과 결제 실패를 알려주는 팝업창 생성
* 100000원 이상 입력, 결제수단 카카오페이 선택 시 잔액부족으로 인한 결제 실패 팝업창 생성

위 기능들을 구현했고 이 기능들을 중심으로 테스트 자동화 시나리오를 구성해봤습니다. 

[mock page 소개 영상]

https://github.com/user-attachments/assets/0b12865e-501e-4815-ba57-7f94c155653f





[테스트 자동화 영상(3.5배속)]




https://github.com/user-attachments/assets/4ed08efc-89ea-4699-9cb4-375f365d607c





https://github.com/user-attachments/assets/03164701-862f-48c2-ad16-33caac81c756




## 자동화 시나리오 요약
* **시나리오 A - 필수조건 누락시 결제버튼 비활성화**
  1. 금액만 입력한 경우 -> 결제 버튼 비활성화
  2. 결제수단만 고른 경우 -> 결제 버튼 비활성화
  3. 약관 동의 박스 체크만 한 경우 -> 결제 버튼 비활성화
  4. 금액만 입력하지 않은 경우 -> 결제 버튼 비활성화
  5. 결제수단만 고르지 않은 경우 -> 결제 버튼 비활성화
  6. 약관 동의 박스 체크만 하지 않은 경우 -> 결제 버튼 비활성화
    
* **시나리오 B - 결제수단을 카드로 고른 경우 은행 시스템 점검으로 인한 결제취소 팝업 생성 로직이 우선 적용 되는지**
  1. 500원 입력 후 결제 버튼 클릭 -> 은행 시스템 점검으로 인한 결제 취소 팝업 생성 확인
  2. 1000원 입력 후 결제 버튼 클릭 -> 은행 시스템 점검으로 인한 결제 취소 팝업 생성 확인
  3. 100000원 입력 후 결제 버튼 클릭 -> 은행 시스템 점검으로 인한 결제 취소 팝업 생성 확인
    
* **시나리오 C - 결제수단을 카카오페이로 고른 후 금액별 분기 검증**
    1. 500원 입력 후 결제 버튼 클릭 -> 최소 결제금액 미달로 인한 결제 취소 팝업 생성 확인
    2. 1000원 입력 후 결제 버튼 클릭 -> 입력한 금액과 결제 성공 팝업 생성 확인
    3. 100000원 입력 후 결제 버튼 클릭 -> 잔액 부족으로 인한 결제 취소 팝업 생성 확인
   
크롬, 파이어폭스, webkit 세가지 브라우저로 한꺼번에 테스트 진행.



## playwright를 선택한 이유
* 한번의 스크립트 작성으로 여러 브라우저에서 한꺼번에 테스트 가능해 테스트 자원을 절약할 수 있습니다.
* playwright는 요소가 나타날때 까지 자동으로 기다려주므로 테스트 신뢰도를 높이고 유지보수 비용을 절감할 수 있습니다.

## 결제시스템을 대상으로 한 이유
* 매출과 직결되는 매우 민감한 영역입니다. 조금의 장애도 막대한 손실로 이루어질 수 있어 자동화를 통한 상시 모니터링 및 리그레션 테스트가 필수적이라 생각했습니다.
* 결제시스템은 기술적으로 복잡한 부분이 많아 이러한 복잡한 로직들을 자동화함으로써 인적오류를 줄이고 수동테스트의 피로도를 줄일 수 있습니다.


[테스트 리포트 요약]




https://github.com/user-attachments/assets/714d9a1a-989c-449b-936d-1089645f40dc











